{% extends "base.html" %}
{% load widget_tweaks %}

{% block profil %}{% endblock %}


{%comment%}

{% block profil %}

<div class="sidebar sticky">
    <div itemscope itemtype="http://schema.org/Person">
        <form action="{% url 'homepage:edit_profile' profile.user.username %}" method="POST"
            enctype="multipart/form-data">
            {%csrf_token%}
            <div class="author__avatar">
                <img src="{{ profile.picture.url }}" alt="{{ profile.user.first_name }} {{ profile.user.last_name }}" />
                <div class="">
                    Clear: {{ form_profile.clear_picture }}
                </div>
                <div style="display: flex;">
                    Update: {{ form_profile.picture }}
                </div>
            </div>
            <div class="author__content">
                <label>First name:</label>{{ form_user.first_name }}
                <label>Last name:</label>{{ form_user.last_name }}
                <label>Bio:</label>{{ form_profile.description }}
            </div>
            <div class="author__urls-wrapper">
                <button class="btn btn--inverse">Follow</button>
                <ul class="author__urls social-icons">
                    <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i>{{ form_profile.place }}</li>
                    <li><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i>{{ form_user.email }}</li>
                    <li><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i>{{ form_profile.twitter }}</li>
                    <li><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i>{{ form_profile.linkedin }}</li>
                    <li><i class="fab fa-fw fa-github" aria-hidden="true"></i>{{ form_profile.github }}</li>
                    <li><i class="fab fa-fw fa-youtube" aria-hidden="true"></i>{{ form_profile.youtube }}</li>
                    <li><i class="ai ai-google-scholar-square ai-fw" style="color:blue"></i>{{ form_profile.scholar }}
                    </li>
                    <li><i class="ai ai-orcid-square ai-fw"></i>{{ form_profile.orcid }}</li>
                    <li><i class="ai ai-arxiv-square ai-fw"></i>{{ form_profile.arxiv }}</li>
                    <li><i class="fas fa-fw fa-chess" aria-hidden="true"></i>{{ form_profile.lichess }}</li>
                </ul>
            </div>
            <div style="text-align: center;">
                <input class="submit_update" type="submit" value="Update" name="update_profile_form">
                <input class="submit_cancel" type="submit" value="Cancel" name="cancel_profile_form">
            </div>
        </form>
    </div>
</div>

{% endblock %}
{% endcomment %}

{% block main_body %}
<div class="container">
    <div class="row m-2">
        <div class="col-lg-12 text-center border bg-light">
            <h1 class="text-center">Update your Profile </h1>
        </div>
    </div>
    <div class="row">
        <!-- User Information Form -->
        <div class="col-lg-4">
            <h3 class="text-center border bg-light">Update your contact informations</h2>
                <form action="{% url 'homepage:edit_profile' profile.user.username %}" method="POST">{%csrf_token%}
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text"><i class="fas fa-user fa-fw" aria-hidden="true"></i></span>
                        </div>
                        {% render_field form_user.first_name class="form-control" %}
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text"><i class="fas fa-user fa-fw" aria-hidden="true" style="color:black"  ></i></span>
                        </div>
                        {% render_field form_user.last_name class="form-control" %}
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i></span>
                        </div>
                        {% render_field form_user.email class="form-control" %}
                    </div>
                    <div class="mt-3 float-right">
                        <input class="btn btn-success" type="submit" value="Update" name="update_user_form">
                        <input class="btn btn-danger" type="submit" value="Cancel" name="cancel_user_form">
                    </div>
                </form>
        </div>
        <!-- Social Form -->
        <div class="col-lg-8 center-block">
            <h3 class="text-center border bg-light">Update your social informations</h2>
                <form action="{% url 'homepage:edit_profile' profile.user.username %}" method="POST">{%csrf_token%}
                    <div class="form-row mb-3">
                        <div class="col">
                            <div class="custom-file">
                                {% render_field form_profile.picture class="custom-file-input" %}
                                <label class="custom-file-label"
                                    for="{{ form_profile.picture.id_for_label }}">{{ form_profile.picture.label_tag }}</label>
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="custom-control custom-checkbox pt-2">
                                <label class="custom-control-label"
                                    for="{{ form_profile.clear_picture.id_for_label }}">{{ form_profile.clear_picture.label_tag }}</label>
                                {% render_field form_profile.clear_picture class="custom-control-input" %}
                            </div>   
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="col">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i></span>
                                </div>
                                {% render_field form_profile.place class="form-control" %}
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i></span>
                                </div>
                                {% render_field form_profile.twitter class="form-control" %}
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="fab fa-fw fa-github" aria-hidden="true"></i></span>
                                </div>
                                {% render_field form_profile.github class="form-control" %}
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="ai ai-google-scholar-square ai-fw" style="color:blue"></i></span>
                                </div>
                                {% render_field form_profile.scholar class="form-control" placeholder=form_profile.scholar.label %}
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="ai ai-arxiv-square ai-fw"></i></span>
                                </div>
                                {% render_field form_profile.arxiv class="form-control" %}
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="fas fa-fw fa-chess" aria-hidden="true"></i></span>
                                </div>
                                {% render_field form_profile.lichess class="form-control" %}
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="fas fa-user fa-fw" aria-hidden="true"></i></span>
                                </div>
                                {% render_field form_profile.description class="form-control" %}
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></span>
                                </div>
                                {% render_field form_profile.linkedin class="form-control" %}
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i></i></span>
                                </div>
                                {% render_field form_profile.youtube class="form-control" %}
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text"><i class="ai ai-orcid-square ai-fw"></i></span>
                                </div>
                                {% render_field form_profile.orcid class="form-control" %}
                            </div>
                        </div>
                    </div>

                    <div class="mt-3 float-right">
                        <input class="btn btn-success" type="submit" value="Update" name="update_profile_form">
                        <input class="btn btn-danger" type="submit" value="Cancel" name="cancel_profile_form">
                    </div>
                </form>
        </div>
    </div>
</div>

<script>
    // Add the following code if you want the name of the file appear on select
    $(".custom-file-input").on("change", function () {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
</script>

{% endblock %}